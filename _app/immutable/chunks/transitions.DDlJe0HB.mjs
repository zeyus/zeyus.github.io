import{G as z,aC as B,aD as G,n as I,u as M,a3 as O,ab as P,q as j,C as w,aE as x,aF as R,af as S,aw as D}from"./utils.DPR7n44y.mjs";import{f as K}from"./disclose-version.B_NtFLRd.mjs";const U=()=>performance.now(),u={tick:r=>requestAnimationFrame(r),now:()=>U(),tasks:new Set};function L(){const r=u.now();u.tasks.forEach(a=>{a.c(r)||(u.tasks.delete(a),a.f())}),u.tasks.size!==0&&u.tick(L)}function W(r){let a;return u.tasks.size===0&&u.tick(L),{promise:new Promise(t=>{u.tasks.add(a={c:r,f:t})}),abort(){u.tasks.delete(a)}}}function b(r,a){r.dispatchEvent(new CustomEvent(a))}function H(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const a=r.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function q(r){const a={},t=r.split(";");for(const i of t){const[v,d]=i.split(":");if(!v||d===void 0)break;const n=H(v.trim());a[n]=d.trim()}return a}const J=r=>r;function X(r,a,t,i){var v=(r&x)!==0,d="both",n,E=a.inert,o,c;function e(){var s=D,l=O;R(null),S(null);try{return n??(n=t()(a,(i==null?void 0:i())??{},{direction:d}))}finally{R(s),S(l)}}var m={is_global:v,in(){a.inert=E,b(a,"introstart"),o=p(a,e(),c,1,()=>{b(a,"introend"),o==null||o.abort(),o=n=void 0})},out(s){a.inert=!0,b(a,"outrostart"),c=p(a,e(),o,0,()=>{b(a,"outroend"),s==null||s()})},stop:()=>{o==null||o.abort(),c==null||c.abort()}},_=O;if((_.transitions??(_.transitions=[])).push(m),K){var h=v;if(!h){for(var f=_.parent;f&&f.f&z;)for(;(f=f.parent)&&!(f.f&B););h=!f||(f.f&G)!==0}h&&I(()=>{M(()=>m.in())})}}function p(r,a,t,i,v){var d=i===1;if(P(a)){var n,E=!1;return j(()=>{if(!E){var l=a({direction:d?"in":"out"});n=p(r,l,t,i,v)}}),{abort:()=>{E=!0,n==null||n.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(t==null||t.deactivate(),!(a!=null&&a.duration))return v(),{abort:w,deactivate:w,reset:w,t:()=>i};const{delay:o=0,css:c,tick:e,easing:m=J}=a;var _=[];if(d&&t===void 0&&(e&&e(0,1),c)){var h=q(c(0,1));_.push(h,h)}var f=()=>1-i,s=r.animate(_,{duration:o});return s.onfinish=()=>{var l=(t==null?void 0:t.t())??1-i;t==null||t.abort();var C=i-l,k=a.duration*Math.abs(C),y=[];if(k>0){if(c)for(var A=Math.ceil(k/16.666666666666668),T=0;T<=A;T+=1){var N=l+C*m(T/A),g=c(N,1-N);y.push(q(g))}f=()=>{var F=s.currentTime;return l+C*m(F/k)},e&&W(()=>{if(s.playState!=="running")return!1;var F=f();return e(F,1-F),!0})}s=r.animate(y,{duration:k,fill:"forwards"}),s.onfinish=()=>{f=()=>i,e==null||e(i,1-i),v()}},{abort:()=>{s&&(s.cancel(),s.effect=null,s.onfinish=w)},deactivate:()=>{v=w},reset:()=>{i===0&&(e==null||e(1,0))},t:()=>f()}}export{X as t};
