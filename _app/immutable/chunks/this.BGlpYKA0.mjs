import{G as N,E as h,F as R,H as k,M as F,O as L,P as O,Q as _,R as d,I as E,K as A,J as g,U as o,e as q,b as v,u as x,S as D,T as H}from"./runtime.jmfZKiTF.mjs";function P(a,f,e=!1){h&&R();var i=a,r=null,s=null,c=o,S=e?k:0,l=!1;const b=(n,t=!0)=>{l=!0,u(t,n)},u=(n,t)=>{if(c===(c=n))return;let T=!1;if(h){const y=i.data===F;!!c===y&&(i=L(),O(i),_(!1),T=!0)}c?(r?d(r):t&&(r=E(()=>t(i))),s&&A(s,()=>{s=null})):(s?d(s):t&&(s=E(()=>t(i))),r&&A(r,()=>{r=null})),T&&_(!0)};N(()=>{l=!1,f(b),l||u(null,null)},S),h&&(i=g)}function I(a,f){return a===f||(a==null?void 0:a[H])===f}function U(a={},f,e,i){return q(()=>{var r,s;return v(()=>{r=s,s=[],x(()=>{a!==e(...s)&&(f(a,...s),r&&I(e(...r),a)&&f(null,...r))})}),()=>{D(()=>{s&&I(e(...s),a)&&f(null,...s)})}}),a}export{U as b,P as i};
