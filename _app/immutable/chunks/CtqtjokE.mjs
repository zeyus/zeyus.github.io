import{A as S,a7 as q,ai as z,aj as B,e as I,u as M,ak as P,al as G,x as K,a8 as k,am as x,an as L,ao as U}from"./DkShWkU_.mjs";import{i as W,w as D}from"./Cn6dfEUX.mjs";const H=()=>performance.now(),c={tick:r=>requestAnimationFrame(r),now:()=>H(),tasks:new Set};function j(){const r=c.now();c.tasks.forEach(a=>{a.c(r)||(c.tasks.delete(a),a.f())}),c.tasks.size!==0&&c.tick(j)}function J(r){let a;return c.tasks.size===0&&c.tick(j),{promise:new Promise(t=>{c.tasks.add(a={c:r,f:t})}),abort(){c.tasks.delete(a)}}}function F(r,a){D(()=>{r.dispatchEvent(new CustomEvent(a))})}function Q(r){if(r==="float")return"cssFloat";if(r==="offset")return"cssOffset";if(r.startsWith("--"))return r;const a=r.split("-");return a.length===1?a[0]:a[0]+a.slice(1).map(t=>t[0].toUpperCase()+t.slice(1)).join("")}function g(r){const a={},t=r.split(";");for(const s of t){const[v,d]=s.split(":");if(!v||d===void 0)break;const n=Q(v.trim());a[n]=d.trim()}return a}const V=r=>r;function Z(r,a,t,s){var v=(r&P)!==0,d="both",n,E=a.inert,T=a.style.overflow,f,e;function _(){var o=U,h=S;x(null),L(null);try{return n??(n=t()(a,(s==null?void 0:s())??{},{direction:d}))}finally{x(o),L(h)}}var w={is_global:v,in(){a.inert=E,F(a,"introstart"),f=p(a,_(),e,1,()=>{F(a,"introend"),f==null||f.abort(),f=n=void 0,a.style.overflow=T})},out(o){a.inert=!0,F(a,"outrostart"),e=p(a,_(),f,0,()=>{F(a,"outroend"),o==null||o()})},stop:()=>{f==null||f.abort(),e==null||e.abort()}},l=S;if((l.transitions??(l.transitions=[])).push(w),W){var u=v;if(!u){for(var i=l.parent;i&&(i.f&q)!==0;)for(;(i=i.parent)&&(i.f&z)===0;);u=!i||(i.f&B)!==0}u&&I(()=>{M(()=>w.in())})}}function p(r,a,t,s,v){var d=s===1;if(G(a)){var n,E=!1;return K(()=>{if(!E){var o=a({direction:d?"in":"out"});n=p(r,o,t,s,v)}}),{abort:()=>{E=!0,n==null||n.abort()},deactivate:()=>n.deactivate(),reset:()=>n.reset(),t:()=>n.t()}}if(t==null||t.deactivate(),!(a!=null&&a.duration))return v(),{abort:k,deactivate:k,reset:k,t:()=>s};const{delay:T=0,css:f,tick:e,easing:_=V}=a;var w=[];if(d&&t===void 0&&(e&&e(0,1),f)){var l=g(f(0,1));w.push(l,l)}var u=()=>1-s,i=r.animate(w,{duration:T,fill:"forwards"});return i.onfinish=()=>{i.cancel();var o=(t==null?void 0:t.t())??1-s;t==null||t.abort();var h=s-o,m=a.duration*Math.abs(h),A=[];if(m>0){var C=!1;if(f)for(var N=Math.ceil(m/16.666666666666668),b=0;b<=N;b+=1){var O=o+h*_(b/N),R=g(f(O,1-O));A.push(R),C||(C=R.overflow==="hidden")}C&&(r.style.overflow="hidden"),u=()=>{var y=i.currentTime;return o+h*_(y/m)},e&&J(()=>{if(i.playState!=="running")return!1;var y=u();return e(y,1-y),!0})}i=r.animate(A,{duration:m,fill:"forwards"}),i.onfinish=()=>{u=()=>s,e==null||e(s,1-s),v()}},{abort:()=>{i&&(i.cancel(),i.effect=null,i.onfinish=k)},deactivate:()=>{v=k},reset:()=>{s===0&&(e==null||e(1,0))},t:()=>u()}}export{Z as t};
